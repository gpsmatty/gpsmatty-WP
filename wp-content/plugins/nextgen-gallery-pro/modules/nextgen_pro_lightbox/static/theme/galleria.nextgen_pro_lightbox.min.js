!function(e){var n=setInterval(function(){"undefined"!=typeof window.Galleria&&(clearInterval(n),t())},10),t=function(){Galleria.addTheme({name:"nextgen_pro_lightbox",author:"Imagely",version:2,defaults:{debug:!1,responsive:!0,carousel:!0,thumbnails:"lazy",fullscreen:!1,trueFullscreen:!1,fullscreenDoubleTap:!1,maxScaleRatio:1},init:function(n){var t=this;Galleria.requires(1.41,"This version of the NextGEN Pro Lightbox theme requires Galleria 1.4.1 or later"),e.nplModal("log","theme initialization",{options:n});var a={sidebar:{_is_open:!1,_type:"",is_open:function(e){return"undefined"==typeof e?this._is_open:void(this._is_open=e)},toggle:function(n){e.nplModal("log","theme sidebar.toggle()",{type:n}),this.is_open()&&n===this.get_type()?this.close():this.open(n)},open:function(n){e.nplModal("log","theme sidebar.open()",{type:n}),e("#npl_wrapper").addClass("npl-sidebar-open npl-sidebar-overlay-open"),this.render(n),a.sidebar.is_open(!0);var l=e.nplModal("get_state");l.sidebar=n,e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+l.slug+"/"+l.image_id+"/"+n,!0),t.resize(),t.trigger("npl_sidebar_opened")},close:function(){e.nplModal("log","theme sidebar.close()"),e("#npl_wrapper").removeClass("npl-sidebar-open npl-sidebar-overlay-open"),a.sidebar.is_open(!1);var n=e.nplModal("get_state");n.sidebar=null,e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+n.slug+"/"+n.image_id,!0),t.resize(),t.trigger("npl_sidebar_closed")},render:function(n){e.nplModal("log","theme sidebar.render()",{type:n}),n!==this.get_type()&&(this._type=n,e.nplModal("get_state").sidebar=n),a.sidebars[n].render(a.galleria.get_current_image_id()),a.sidebars[n].init()},get_type:function(){return this._type},events:{bind:function(){e.nplModal("log","theme sidebar.events.bind()"),t.bind("npl_sidebar_rendered",this.rendered),e("#npl_sidebar_toggle").on("click",function(){a.sidebar.close()})},rendered:function(){e.nplModal("log","theme sidebar.events.rendered()"),e("#nggpl-sidebar-thumbnail-img").attr("src",t.getData(t.getIndex()).image)}}},sidebars:{comments:{_cache:[],get_cache_size:function(){var n=e.map(this._cache,function(e,n){return e}).length;return e.nplModal("log","theme sidebars.comments.get_cache_size()",{result:n}),n},get_prev_uncached_image_id:function(n){var l=t.getData(t.getPrev(a.galleria.get_index_from_id(n))).image_id;return this._cache[l]&&this.get_cache_size()<t.getDataLength()&&(l=this.get_prev_uncached_image_id(l)),e.nplModal("log","theme sidebars.comments.get_prev_uncached_image_id()",{id:n,result:l}),l},get_next_uncached_image_id:function(n){var l=t.getData(t.getNext(a.galleria.get_index_from_id(n))).image_id;return this._cache[l]&&this.get_cache_size()<t.getDataLength()&&(l=this.get_next_uncached_image_id(l)),e.nplModal("log","theme sidebars.comments.get_next_uncached_image_id()",{id:n,result:l}),l},expanded_request:function(n,t){e.nplModal("log","theme sidebars.comments.expanded_request()",{id:n});var a=n instanceof Array?n:n.toString().split(",");if(1===a.length){var l=a[0],i=this.get_prev_uncached_image_id(l),o=this.get_next_uncached_image_id(l);this._cache[i]||a.unshift(i),this._cache[o]||i===o||n===o||a.push(o)}a=e.unique(a),this.request(a,0,t)},request:function(n,t,a){e.nplModal("log","theme sidebars.comments.request()",{id:n,page:t});var l=this,i={action:"get_comments",type:"image",page:t,id:n.join(","),from:window.parent.location.toString()};e.nplModal("get_setting","lang",!1)&&(i.lang=e.nplModal("get_setting","lang")),e.post(photocrati_ajax.url,i,function(n){e.nplModal("log","theme sidebars.comments.request() response",{response:n}),"object"!=typeof n&&(n=JSON.parse(n));for(var t in n.responses)l._cache[t]=n.responses[t];"function"==typeof a&&a(n)})},load_more:function(n){if(e.nplModal("log","theme sidebars.comments.load_more()",{id:n}),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)){var t=[],l=this.get_prev_uncached_image_id(n),i=this.get_next_uncached_image_id(n);this._cache[l]||t.push(l),this._cache[i]||t.push(i),0!==e.unique(t).length&&this.expanded_request(e.unique(t))}},init:function(){if(e.nplModal("log","theme sidebars.comments.init()"),1===e("#nggpl-comments-wrapper").length){var n=document.getElementById("ngg_comment_origin_url");"undefined"!=typeof n&&null!==n&&(n.value=window.location.href.toString()),e("#npl_sidebar").find("a").each(function(){"nggpl-comment-logout"===e(this).attr("id")?e(this).attr("href",e(this).attr("href")+"?redirect_to="+window.location.toString()):e(this).attr("target","_blank")}),e("#nggpl-respond-form").bind("submit",function(n){n.preventDefault();var t=e("#nggpl-comment-status");e("#npl_wrapper").addClass("npl-sidebar-overlay-open"),e.ajax({type:e(this).attr("method"),url:e(this).attr("action"),data:e(this).serialize(),dataType:"json",success:function(n){if(n.success===!0){e("#nggpl-comment").val(""),e("#nggpl-comments-title").val("");var l=a.galleria.get_current_image_id();a.sidebars.comments.expanded_request(l,function(){a.sidebar.render(a.sidebars.comments.get_type(),l)})}else t.addClass("error").html(n),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")},complete:function(e,n){},error:function(n){t.addClass("error").html(n.responseText),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")}})}),e("#npl_sidebar .nggpl-button, #nggpl-comment-form-wrapper input[type='submit']").each(function(){var n=e(this);n.css({color:e.nplModal("get_setting","sidebar_button_color"),"background-color":e.nplModal("get_setting","sidebar_button_background")})}),e(".nggpl-reply-to-comment").bind("click",function(n){n.preventDefault(),e("#nggpl-comment_parent").val(e(this).data("comment-id")),e("#nggpl-comment-reply-status").removeClass("hidden"),e("#nggpl-commentform").find(":input").filter(":visible:first").focus(),e("#nggpl-comments").velocity({scrollTop:e("#nggpl-comments-bottom").offset().top},"slow")}),e("#nggpl-comment-reply-status a").bind("click",function(n){n.preventDefault(),e("#nggpl-comment_parent").val("0"),e("#nggpl-comment-reply-status").addClass("hidden")}),e("#nggpl-comment-nav-below a").bind("click",function(n){n.preventDefault(),e("#npl_wrapper").addClass("npl-sidebar-overlay-open");var t=e(this).data("page-id");a.sidebars.comments.request([a.galleria.get_current_image_id()],t,function(){a.sidebar.render("comments",a.galleria.get_current_image_id())})}),t.trigger("npl_sidebar_rendered"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_sharing",!1)&&(e("#nggpl-comments-image-share-icons").removeClass("disabled"),a.share_icons.create("#nggpl-comments-image-share-icons",a.icons.get_overlay_color()))}},render:function(n){e.nplModal("log","theme sidebars.comments.render()",{id:n}),n=n||t.getData(t.getIndex()).image_id;var l=this._cache;this._cache[n]?(e("#npl_sidebar").html(l[n].rendered_view),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")):this.expanded_request(n,function(){e("#npl_sidebar").html(l[n].rendered_view),a.sidebars.comments.init(),e("#npl_wrapper").removeClass("npl-sidebar-overlay-open")})},get_type:function(){return"comments"},events:{bind:function(){e.nplModal("log","theme sidebars.comments.events.bind()"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&!a.nplModal.is_random_source()&&(t.bind("image",this.image),t.bind("npl_init",this.npl_init),t.bind("npl_init_keys",this.npl_init_keys))},npl_init:function(){e.nplModal("log","theme sidebars.comments.events.npl_init()");var n=e("<i/>").addClass("nggpl-toolbar-button-comment fa fa-comment").attr({title:e.nplModal("get_setting","i18n").toggle_social_sidebar}).click(function(e){a.sidebar.toggle(a.sidebars.comments.get_type()),e.preventDefault()});a.thumbnails.register_button(n)},_image_ran_once:!1,image:function(){e.nplModal("log","theme sidebars.comments.events.image()"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&(a.sidebars.comments._image_ran_once?(a.sidebars.comments.load_more(a.galleria.get_current_image_id()),a.sidebar.is_open()&&a.sidebar.get_type()===a.sidebars.comments.get_type()&&a.sidebar.render(a.sidebars.comments.get_type())):(e.nplModal("get_state").sidebar&&e.nplModal("get_state").sidebar===a.sidebars.comments.get_type()||e.nplModal("get_setting","display_comments"))&&!e.nplModal("mobile.browser.any")&&a.sidebar.open(a.sidebars.comments.get_type()),a.sidebars.comments._image_ran_once=!0)},npl_init_keys:function(){e.nplModal("log","theme sidebars.comments.events.npl_init_keys()");var n=a.galleria.get_keybinding_exclude_list();a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&t.attachKeyboard({32:function(){e(document.activeElement).is(n)||a.sidebar.toggle(a.sidebars.comments.get_type())}})}}}},thumbnails:{is_open:function(){return e("#npl_wrapper").hasClass("npl-carousel-closed")},toggle:function(){e.nplModal("log","theme thumbnails.toggle()"),this.is_open()?this.close():this.open()},open:function(){e.nplModal("log","theme thumbnails.open()"),e("#npl_wrapper").addClass("npl-carousel-closed"),e(".galleria-dock-toggle-container i").toggleClass("fa-angle-up fa-angle-down"),e(window).trigger("resize")},close:function(){e.nplModal("log","theme thumbnails.close()"),e("#npl_wrapper").removeClass("npl-carousel-closed"),e(".galleria-dock-toggle-container i").toggleClass("fa-angle-up fa-angle-down"),e(window).trigger("resize")},adjust_container:function(){e.nplModal("log","theme thumbnails.adjust_container()");var n=t.$("thumbnails-container").width()-t.$("nextgen-buttons").width()-t.$("thumb-nav-left").width()-t.$("thumb-nav-right").width();n<=280?t.$("container").addClass("nggpl-carousel-too-small"):t.$("container").removeClass("nggpl-carousel-too-small")},_buttons:[],register_button:function(n){e.nplModal("log","theme thumbnails.register_button()",{button:n});var a=e('<span class="nggpl-button nggpl-toolbar-button"/>');e.nplModal("get_setting","icon_background_enabled",!1)&&e.nplModal("get_setting","icon_background_rounded",!1)&&a.addClass("nggpl-rounded"),a.html(n),this._buttons.push(a),e(t._dom.stage).append(a)},get_registered_buttons:function(){return e.nplModal("log","theme thumbnails.get_registered_buttons",{buttons:this._buttons}),this._buttons},events:{bind:function(){e.nplModal("log","theme thumbnails.events.bind()"),t.bind("loadfinish",a.thumbnails.adjust_container),t.bind("loadfinish",this.loadfinish),t.bind("npl_sidebar_opened",a.thumbnails.adjust_container),t.bind("npl_sidebar_closed",a.thumbnails.adjust_container),t.bind("npl_init",this.npl_init),t.bind("npl_init_complete",this.npl_init_complete),a.galleria.bind_once("resize",a.thumbnails.adjust_container,250)},npl_init:function(){e.nplModal("log","theme thumbnails.events.npl_init()"),"numbers"===n.thumbnails?(t.$("container").addClass("nggpl-carousel-numbers"),t.$("thumbnails-list").css("color",a.icons.get_color()),t.updateCarousel()):"lazy"===n.thumbnails&&t.lazyLoadChunks(10),t.$("thumbnails-container").css({background:e.nplModal("get_setting","carousel_background_color")}),(!e.nplModal("get_setting","display_carousel",!0)||Galleria.IPHONE||Galleria.IPAD||navigator.userAgent.match("CriOS"))&&a.thumbnails.toggle();var l=e("<i/>").addClass("fa fa-angle-right").css({color:a.icons.get_color()}),i=e("<i/>").addClass("fa fa-angle-left").css({color:a.icons.get_color()});e(t._dom.stage).append(l),e(t._dom.stage).append(i),t.append({"thumb-nav-left":i}),t.append({"thumb-nav-right":l}),t.addElement("dock-toggle-container");var o=t.$("dock-toggle-container").css({background:e.nplModal("get_setting","carousel_background_color")}),s=e("<i/>").addClass("fa fa-angle-down").css({color:e.nplModal("get_setting","carousel_text_color")});e(t._dom.stage).append(s),t.append({"dock-toggle-container":s}),o.click(t.proxy(function(){a.thumbnails.toggle()}));var r=e("<i/>").addClass("nggpl-toolbar-button-play fa fa-play").attr({title:e.nplModal("get_setting","i18n").play_pause}).click(function(n){n.preventDefault(),t.playToggle(),e(this).toggleClass("fa-play"),e(this).toggleClass("fa-pause")});if(this._playing&&r.removeClass("fa-play").addClass("fa-pause"),a.thumbnails.register_button(r),e.nplModal("get_setting","enable_fullscreen",!1)&&e.nplModal("fullscreen.has_support")&&!e.nplModal("mobile.browser.any")){var d=e("<i/>").addClass("nggpl-toolbar-button-fullscreen fa fa-arrows-alt").attr({title:e.nplModal("get_setting","i18n").toggle_fullsize}).click(function(n){n.preventDefault(),e.nplModal("fullscreen.toggle"),e(this).toggleClass("fa-arrows-alt"),e(this).toggleClass("fa-expand")});a.thumbnails.register_button(d)}var g=e("<i/>").addClass("nggpl-toolbar-button-info fa fa-info").attr({title:e.nplModal("get_setting","i18n").toggle_image_info}).click(t.proxy(function(e){e.preventDefault(),a.info.toggle()}));a.thumbnails.register_button(g)},npl_init_complete:function(){e.nplModal("log","theme thumbnails.events.npl_init_complete()");var n=a.thumbnails.get_registered_buttons();for(i=0;i<=n.length-1;i++)n[i].css({color:a.icons.get_color(),"background-color":a.icons.get_background()});t.addElement("nextgen-buttons"),t.append({"nextgen-buttons":n}),t.prependChild("thumbnails-container","nextgen-buttons"),t.prependChild("info","dock-toggle-container"),e.nplModal("mobile.browser.any")||t.addIdleState(t.get("dock-toggle-button"),{opacity:0})},_loadfinish_ran_once:!1,loadfinish:function(){e.nplModal("log","theme thumbnails.events.loadfinish()"),a.thumbnails.events._loadfinish_ran_once||(e("#npl_spinner_container").addClass("hidden"),a.thumbnails.events._loadfinish_ran_once=!0)}}},info:{is_open:function(){return e("#npl_wrapper").hasClass("npl-info-open")},toggle:function(){e.nplModal("log","theme info.toggle()"),this.is_open()?this.close():this.open()},open:function(){e.nplModal("log","theme info.open()"),e("#npl_wrapper").addClass("npl-info-open")},close:function(){e.nplModal("log","theme info.close()"),e("#npl_wrapper").removeClass("npl-info-open")},events:{bind:function(){e.nplModal("log","theme info.events.bind()"),t.bind("npl_init",this.npl_init),t.bind("loadfinish",this.loadfinish)},npl_init:function(){e.nplModal("log","theme info.events.npl_init()");var n=t.$("info").detach();t.$("thumbnails-container").append(n),t.prependChild("info-text",e("<div/>").attr("id","galleria-image-share-icons").attr("class","galleria-image-share-icons")),(carousel_text_color=e.nplModal("get_setting","carousel_text_color"))&&(t.$("info-title").css({color:carousel_text_color}),t.$("info-description").css({color:carousel_text_color})),t.$("info, info-text, info-title, info-description").css({background:e.nplModal("get_setting","carousel_background_color")})},_loadfinish_ran_once:!1,loadfinish:function(){e.nplModal("log","theme info.events.loadfinish()"),t.$("info-title, info-description").find("a").each(function(){e(this).attr("target","_blank"),e(this).css("color",a.icons.get_color())}),a.info.events._loadfinish_ran_once=!0}}},icons:{get_color:function(){return e.nplModal("get_setting","icon_color")},get_background:function(){var n=e.nplModal("get_setting","carousel_background_color");return e.nplModal("get_setting","icon_background_enabled",!1)&&(n=e.nplModal("get_setting","icon_background")),n},get_overlay_color:function(){return e.nplModal("get_setting","overlay_icon_color")}},nplModal:{close:function(){e.nplModal("close_modal")},is_random_source:function(){var n=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id),t=e.inArray(n.source,["random","random_images"])!==-1;return e.nplModal("log","theme nplModal.is_random_source()",{result:t}),t},is_nextgen_gallery:function(){var n="!"!==e.nplModal("get_state").gallery_id;return e.nplModal("log","theme nplModal.is_nextgen_gallery()",{result:n}),n},is_nextgen_widget:function(){var n=!1,t=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id),a=t.slug;return a&&(n=a.indexOf("widget-ngg-images")!==-1),e.nplModal("log","theme nplModal.is_nextgen_widget()",{result:n}),n},events:{bind:function(){e.nplModal("log","theme nplModal.bind()"),(Galleria.IPAD||Galleria.IPHONE)&&t.$("container").addClass("nggpl-ios-browser"),a.nplModal.is_nextgen_gallery()&&t.bind("image",this.image),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_comments",!1)&&e("#npl_content").on("npl_url_handler",this.unhandled_url_change),e.nplModal("get_setting","protect_images",!1)&&(e(".galleria-image").bind("dragstart",function(e){e.preventDefault()}),t.bind("npl_init",this.npl_init),t.bind("npl_init_complete",this.npl_init_complete)),jQuery("#npl_content").bind("npl_closing",this.closing)},npl_init:function(){e.nplModal("log","theme nplModal.events.npl_init()"),t.addElement("image-protection"),document.oncontextmenu=function(e){e=e||window.event,e.preventDefault()}},npl_init_complete:function(){e.nplModal("log","theme nplModal.events.npl_init_complete()"),t.prependChild("images","image-protection")},_image_ran_once:!1,image:function(){if(e.nplModal("log","theme nplModal.events.image()"),a.nplModal.events._image_ran_once&&!a.nplModal.is_random_source()){var n=t.getData(t.getIndex()).image_id,l=a.sidebar.is_open()?"/"+a.sidebar.get_type():"",i=e.nplModal("get_state");i.image_id=n,e.nplModal("set_state",i),e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("router.navigate",e.nplModal("get_setting","router_slug")+"/"+e.nplModal("get_state").slug+"/"+n+l,!0)}a.nplModal.events._image_ran_once=!0},unhandled_url_change:function(n,l){e.nplModal("log","theme nplModal.unhandled_url_change()",{event:n,state:l});for(var i=0;i<=t.getDataLength()-1;i++)l.image_id===t.getData(i).image_id&&t.show(i);a.sidebar.is_open()&&null==l.sidebar?a.sidebar.close():e.nplModal("mobile.browser.any")||a.sidebar.is_open()||"undefined"==typeof l.sidebar||null===l.sidebar||a.sidebar.open(l.sidebar)},closing:function(){t.detachKeyboard()}}},galleria:{bind_once:function(e,n,t){var a=void 0;window.addEventListener(e,function(){"undefined"==typeof a&&(clearTimeout(a),a=void 0),a=setTimeout(function(){a=void 0,n()},t)})},get_displayed_gallery_setting:function(n,t){var a="",l=e.nplModal("get_gallery_from_id",e.nplModal("get_state").gallery_id);return a=l&&"undefined"!=typeof l.display_settings[n]?l.display_settings[n]:t,"1"===a&&(a=!0),"0"===a&&(a=!1),1===a&&(a=!0),0===a&&(a=!1),e.nplModal("log","theme galleria.get_displayed_gallery_setting()",{name:n,result:a}),a},get_keybinding_exclude_list:function(){return"textarea, input"},get_current_image_id:function(){return t.getData(t.getIndex()).image_id},get_index_from_id:function(e){for(var n=null,a=0;a<=t.getDataLength()-1;a++)e===t.getData(a).image_id&&(n=a);return n},events:{bind:function(){e.nplModal("log","theme galleria.events.bind()"),t.bind("touchmove",this.touchmove),t.bind("npl_init",this.npl_init),t.bind("npl_init_keys",this.npl_init_keys),t.bind("npl_init_complete",this.npl_init_complete),t.bind("loadstart",this.loadstart),t.bind("loadfinish",this.loadfinish),e(window).on("resize orientationchange",this.browserchanged)},browserchanged:function(){e.nplModal("log","theme galleria.events.browserchanged()"),setTimeout(function(){t.rescale()},200)},npl_init:function(){e.nplModal("log","theme galleria.events.npl_init()"),t.setPlaytime(1e3*e.nplModal("get_setting","slideshow_speed",5)),t.$("container").css({background:e.nplModal("get_setting","background_color")});var n=e("<i/>").addClass("fa fa-angle-right").css({color:a.icons.get_overlay_color()}),l=e("<i/>").addClass("fa fa-angle-left").css({color:a.icons.get_overlay_color()});e(t._dom.stage).append(n),e(t._dom.stage).append(l),t.append({"image-nav-left":l}),t.append({"image-nav-right":n}),t.$("counter").css({color:a.icons.get_overlay_color()})},npl_init_keys:function(){e.nplModal("log","theme galleria.events.npl_init_keys()");var n=a.galleria.get_keybinding_exclude_list();t.attachKeyboard({left:function(){e(document.activeElement).is(n)||this.prev()},right:function(){e(document.activeElement).is(n)||this.next()},down:function(){e(document.activeElement).is(n)||a.thumbnails.toggle()},up:function(){e(document.activeElement).is(n)||a.info.toggle()},27:function(e){e.preventDefault(),a.nplModal.close()},70:function(){e(document.activeElement).is(n)||e.nplModal("get_setting","enable_fullscreen",!1)&&e.nplModal("fullscreen.has_support")&&e.nplModal("fullscreen.toggle")}})},npl_init_complete:function(){e.nplModal("log","theme galleria.events.npl_init_complete()"),e.nplModal("mobile.browser.any")||(t.addIdleState(t.get("counter"),{opacity:0}),t.addIdleState(t.get("image-nav-left"),{opacity:0}),t.addIdleState(t.get("image-nav-right"),{opacity:0}))},touchmove:function(n){e(".scrollable").has(e(n.target)).length||(e.nplModal("log","theme galleria.events.touchmove() prevented scrolling"),n.preventDefault())},loadstart:function(n){if(e.nplModal("log","theme galleria.events.loadstart()",{event:n}),!n.cached){var t=e("#npl_button_close").find("i");t.removeClass("fa-times-circle"),t.addClass("fa-spinner"),t.addClass("fa-spin")}},loadfinish:function(){e.nplModal("log","theme galleria.events.loadfinish()");var n=e("#npl_button_close").find("i");n.addClass("fa-times-circle"),n.removeClass("fa-spinner"),n.removeClass("fa-spin")}}},share_icons:{strip_html:function(e){var n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText||""},create:function(n,l){if(e.nplModal("log","theme share_icons.create()"),a.nplModal.is_random_source()||a.nplModal.is_nextgen_widget()||!a.nplModal.is_nextgen_gallery()||!e.nplModal("get_setting","enable_routing",!1))return!1;var i=t.getData(t.getIndex()).image_id,o=t.getData(t.getIndex()),s=encodeURIComponent(a.share_icons.get_share_url(i)),r=encodeURIComponent(window.location.toString()),d=a.share_icons.strip_html(o.title),g=a.share_icons.strip_html(o.description),p=e("<li/>").html(e("<a/>",{href:"https://twitter.com/share?url="+a.share_icons.get_share_url(i,"full"),target:"_blank",class:"nggpl-comment-tweet-button",title:e.nplModal("get_setting","i18n").share.twitter}).css({color:l}).html(e("<i/>",{class:"fa fa-twitter-square"}))),c=e("<li/>").html(e("<a/>",{href:"https://plus.google.com/share?url="+s,target:"_blank",class:"nggpl-comment-googlep-button",title:e.nplModal("get_setting","i18n").share.googlep}).css({color:l}).html(e("<i/>",{class:"fa fa-google-plus-square"}))),_=e("<li/>").html(e("<a/>",{class:"nggpl-comment-facebook-button",title:e.nplModal("get_setting","i18n").share.facebook}).css({color:l}).html(e("<i/>",{class:"fa fa-facebook-square"})));if("undefined"!=typeof e.nplModal("get_setting","facebook_app_id"))_.on("click",function(e){e.preventDefault(),FB.ui({method:"share",href:a.share_icons.get_share_url(i,"full"),link:window.location.toString()},function(e){console.log(e)})});else{var u="https://www.facebook.com/sharer/sharer.php?s=100";u+="&p[url]="+encodeURIComponent(a.share_icons.get_share_url(i,"full")),d.length>0&&(u+="&p[title]="+d.trim()),g.length>0&&(u+="&p[summary]="+g.trim()),u+="&p[images][0]="+encodeURIComponent(o.image).trim();var m=_.find("a");m.attr("href",u),m.attr("target","_blank")}var h=encodeURIComponent(a.share_icons.get_share_url(i,"full"));h+="&url="+r,h+="&media="+o.image,h+="&description="+g;var f=e("<li/>").html(e("<a/>",{href:"http://pinterest.com/pin/create/button/?s=100"+h,target:"_blank",class:"nggpl-comment-pinterest-button",title:e.nplModal("get_setting","i18n").share.pinterest}).css({color:l}).html(e("<i/>",{class:"fa fa-pinterest-square"}))),b=[p,c,_,f];n=e(n),n.html(""),e("<ul/>").appendTo(n),n.find("ul").append(b)},get_share_url:function(n,t){"undefined"==typeof t&&(t="thumb");var a=e.nplModal("get_state").gallery_id,l=e.nplModal("get_setting","share_url").replace("{gallery_id}",a).replace("{image_id}",n).replace("{named_size}",t),i=e("<a/>").attr("href",e.nplModal("get_setting","wp_site_url"))[0],o=e("<a/>").attr("href",window.location.toString())[0],s=e("<a/>").attr("href",l)[0];return o.pathname.indexOf(i.pathname)>=0&&(o.pathname=o.pathname.substr(i.pathname.length)),o.pathname.indexOf(s.pathname)>=0&&(o.pathname=o.pathname.substr(o.pathname.length)),s.search=o.search,s.search.length>0&&(s.search+="&"),s.search+="uri="+o.pathname,e.nplModal("log","theme share_icons.get_share_url() result",{id:n,named_size:t,result:s.href}),s.href},events:{bind:function(){e.nplModal("log","theme share_icons.events.bind()"),t.bind("loadfinish",this.loadfinish),t.bind("npl_init",this.npl_init)},npl_init:function(){"undefined"!=typeof e.nplModal("get_setting","facebook_app_id")&&"undefined"==typeof window.fbAsyncInit&&(window.fbAsyncInit=function(){FB.init({appId:e.nplModal("get_setting","facebook_app_id"),autoLogAppEvents:!0,xfbml:!0,version:"v2.12"})},function(e,n,t){var a,l=e.getElementsByTagName(n)[0];e.getElementById(t)||(a=e.createElement(n),a.id=t,a.src="https://connect.facebook.net/en_US/sdk.js",l.parentNode.insertBefore(a,l))}(document,"script","facebook-jssdk"))},loadfinish:function(){if(e.nplModal("log","theme share_icons.events.loadfinish()"),a.nplModal.is_nextgen_gallery()&&e.nplModal("get_setting","enable_routing",!1)&&e.nplModal("get_setting","enable_sharing",!1)){var n=e.nplModal("get_setting","carousel_text_color")?e.nplModal("get_setting","carousel_text_color"):a.icons.get_color();a.share_icons.create("#galleria-image-share-icons",n)}}}}};e.nplModal("log","theme initialization - about to bind events"),a.galleria.events.bind(),a.nplModal.events.bind(),a.thumbnails.events.bind(),a.info.events.bind(),a.share_icons.events.bind(),a.sidebar.events.bind(),a.sidebars.comments.events.bind(),e.nplModal("log","theme initialization - done binding events"),e.nplModal("log","theme initialization - about to trigger npl_ready"),e(t._target).trigger("npl_ready",{galleria_theme:t,methods:a}),e.nplModal("log","theme initialization - about to trigger npl_init"),t.trigger("npl_init"),e.nplModal("log","theme initialization - about to trigger npl_init_keys"),t.trigger("npl_init_keys"),e.nplModal("log","theme initialization - about to trigger npl_init_complete"),t.trigger("npl_init_complete")}})}}(jQuery);